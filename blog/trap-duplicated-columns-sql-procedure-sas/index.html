<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>The Trap of Duplicated Columns in the SQL Procedure of SAS</title>
  <meta name="author" content="Ben Chuanlong Du">

  <link href="http://www.legendu.net/misc/atom.xml" type="application/atom+xml" rel="alternate"
        title="Ben Chuanlong Du's Blog Atom Feed" />


  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="http://www.legendu.net/misc/favicon.png" rel="icon">
  <link href="http://www.legendu.net/misc/theme/css/main_2.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="http://www.legendu.net/misc/theme/js/modernizr-2.0.js"></script>
  <script src="http://www.legendu.net/misc/theme/js/ender.js"></script>
  <script src="http://www.legendu.net/misc/theme/js/octopress.js" type="text/javascript"></script>

  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://www.legendu.net/misc/">Ben Chuanlong Du's Blog</a></h1>
    <h2>It is never too late to learn.</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://www.legendu.net/misc/atom.xml" rel="subscribe-rss">RSS</a></li>
</ul>

<form name="search" action="https://www.bing.com/search" method="get" onSubmit="return build_query()">
  <fieldset role="search">
      <!--
    <input type="hidden" name="q" value="site:http://www.legendu.net/misc" />
        -->
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<script type = "text/javascript">
    function build_query() {
        var query = document.forms["search"]["q"].value;
        var prefix = "site:http://www.legendu.net/misc "
        if (!query.startsWith(prefix)) {
            query = prefix + query;
            document.forms["search"]["q"].value = query;
        }
        return true;
    }
</script>

<ul class="main-navigation">
    <li><a href="http://www.legendu.net">Home</a></li>
    <li><a href="http://www.legendu.net/misc">Blog</a></li>
    <li><a href="http://www.legendu.net/misc/archives.html">Archives</a></li>
    <li><a href="http://www.legendu.net/misc/pages/links.html">Links</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">The Trap of Duplicated Columns in the SQL Procedure of SAS</h1>
      <p class="meta"><time datetime="2015-08-28T13:02:17-07:00" pubdate>Aug 28, 2015</time></p>
</header>

  <div class="entry-content"><p><strong>
Things on this page are
fragmentary and immature notes/thoughts of the author.
It is not meant to readers
but rather for convenient reference of the author and future improvement.
</strong></p>
<p>If 2 columns with the same names are selected from 2 tables when joining them,
the first selected column is kept and the other one is dropped.
If you don't like this behavior, you can rename and drop columns.</p>
<p>This potentially invite some very dangerous errors!!! you know that in sas sql cannot update using join,
so you might want to join to get the create .... when there are many columns, people just use *, the order matters!!!
you must be very carefule !!!!</p>
<div class="highlight"><pre><span></span><span class="kr">data </span>s1;
    <span class="k">input</span> <span class="k">x</span> y;
<span class="k">    datalines;</span><span class="x"></span>
<span class="x">1 2</span>
<span class="x">3 7</span>
<span class="x">4 5</span>
<span class="x">;</span>
<span class="x">run;</span>


<span class="x">data s2;</span>
<span class="x">    input x z;</span>
<span class="x">    datalines;</span>
<span class="x">1 0</span>
<span class="x">3 9</span>
<span class="x">9 7</span>
<span class="x">;</span>
<span class="x">run;</span>

<span class="x">/*</span>
<span class="x">1   2   0</span>
<span class="x">3   7   9</span>
<span class="x">*/</span>
<span class="x">proc sql;</span>
<span class="x">    create table s3 as</span>
<span class="x">    select</span>
<span class="x">        s1.*,</span>
<span class="x">        s2.*</span>
<span class="x">    from </span>
<span class="x">        s1</span>
<span class="x">    inner join</span>
<span class="x">        s2</span>
<span class="x">    on</span>
<span class="x">        s1.x = s2.x</span>
<span class="x">    ;</span>
<span class="x">quit;</span>

<span class="x">/*</span>
<span class="x">1   0   2</span>
<span class="x">3   9   7</span>
<span class="x">.   .   5</span>
<span class="x">*/</span>
<span class="x">proc sql;</span>
<span class="x">    create table s3 as</span>
<span class="x">    select</span>
<span class="x">        s1.*,</span>
<span class="x">        s2.*</span>
<span class="x">    from </span>
<span class="x">        s1</span>
<span class="x">    left join</span>
<span class="x">        s2</span>
<span class="x">    on</span>
<span class="x">        s1.x = s2.x</span>
<span class="x">    ;</span>
<span class="x">quit;</span>

<span class="x">/*</span>
<span class="x">1   0   2</span>
<span class="x">3   9   7</span>
<span class="x">.   .   5</span>
<span class="x">*/</span>
<span class="x">proc sql;</span>
<span class="x">    create table s3 as</span>
<span class="x">    select</span>
<span class="x">        s2.*,</span>
<span class="x">        s1.*</span>
<span class="x">    from </span>
<span class="x">        s1</span>
<span class="x">    left join</span>
<span class="x">        s2</span>
<span class="x">    on</span>
<span class="x">        s1.x = s2.x</span>
<span class="x">    ;</span>
<span class="x">quit;</span>

<span class="x">/*</span>
<span class="x">1   2   0</span>
<span class="x">3   7   9</span>
<span class="x">.   .   7</span>
<span class="x">*/</span>
<span class="x">proc sql;</span>
<span class="x">    create table s3 as</span>
<span class="x">    select</span>
<span class="x">        s1.*,</span>
<span class="x">        s2.*</span>
<span class="x">    from </span>
<span class="x">        s1</span>
<span class="x">    right join</span>
<span class="x">        s2</span>
<span class="x">    on</span>
<span class="x">        s1.x = s2.x</span>
<span class="x">    ;</span>
<span class="x">quit;</span>

<span class="x">/*</span>
<span class="x">1   0   2</span>
<span class="x">3   9   7</span>
<span class="x">9   7   .</span>
<span class="x">*/</span>
<span class="x">proc sql;</span>
<span class="x">    create table s3 as</span>
<span class="x">    select</span>
<span class="x">        s2.*,</span>
<span class="x">        s1.*</span>
<span class="x">    from </span>
<span class="x">        s1</span>
<span class="x">    right join</span>
<span class="x">        s2</span>
<span class="x">    on</span>
<span class="x">        s1.x = s2.x</span>
<span class="x">    ;</span>
<span class="kr">quit;</span>
</pre></div>


<h2 id="same-column-appear-twice">same column appear twice</h2>
<div class="highlight"><pre><span></span><span class="kr">data </span>s;
    <span class="k">input</span> <span class="k">x</span> $<span class="m">10</span>. y;
<span class="k">    datalines;</span><span class="x"></span>
<span class="x">1234567890 2 </span>
<span class="x">3          4</span>
<span class="x">5          6</span>
<span class="x">;</span>
<span class="x">run;</span>

<span class="x">proc sql;</span>
<span class="x">    select </span>
<span class="x">        y,</span>
<span class="x">        y</span>
<span class="x">    from    </span>
<span class="x">        s</span>
<span class="x">    ;</span>
<span class="kr">run;</span>
</pre></div>


<p>this actually works in sas ... there will be 2 columns with the same name</p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Ben Chuanlong Du</span>
  </span>
<time datetime="2015-08-28T13:02:17-07:00" pubdate>Aug 28, 2015</time>  <span class="categories">
    <a class="category" href="http://www.legendu.net/misc/tag/programming.html">programming</a>
    <a class="category" href="http://www.legendu.net/misc/tag/sas.html">SAS</a>
    <a class="category" href="http://www.legendu.net/misc/tag/sql.html">SQL</a>
  </span>
</p>    </footer>
  </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/python-tips/">Tips on Python</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/python-tips-and-traps/">Python Tips and Traps</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/exception-and-error-handling-in-python/">Exception and Error Handling in Python</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/ipython-tips/">Tips on IPython</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/tips-for-git-large-file-storage/">Tips for Git Large File Storage</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="http://www.legendu.net/misc/category/ai.html">AI</a></li>
        <li><a href="http://www.legendu.net/misc/category/career.html">Career</a></li>
        <li><a href="http://www.legendu.net/misc/category/cloud.html">Cloud</a></li>
        <li><a href="http://www.legendu.net/misc/category/database.html">Database</a></li>
        <li><a href="http://www.legendu.net/misc/category/encryption.html">Encryption</a></li>
        <li><a href="http://www.legendu.net/misc/category/english.html">English</a></li>
        <li><a href="http://www.legendu.net/misc/category/finance.html">Finance</a></li>
        <li><a href="http://www.legendu.net/misc/category/fun-problems.html">Fun Problems</a></li>
        <li><a href="http://www.legendu.net/misc/category/hardware.html">Hardware</a></li>
        <li><a href="http://www.legendu.net/misc/category/internet.html">Internet</a></li>
        <li><a href="http://www.legendu.net/misc/category/job.html">Job</a></li>
        <li><a href="http://www.legendu.net/misc/category/jupyterlab.html">JupyterLab</a></li>
        <li><a href="http://www.legendu.net/misc/category/language.html">Language</a></li>
        <li><a href="http://www.legendu.net/misc/category/life.html">Life</a></li>
        <li><a href="http://www.legendu.net/misc/category/links.html">Links</a></li>
        <li><a href="http://www.legendu.net/misc/category/linux.html">Linux</a></li>
        <li><a href="http://www.legendu.net/misc/category/machine-learning.html">Machine Learning</a></li>
        <li><a href="http://www.legendu.net/misc/category/macos.html">macOS</a></li>
        <li><a href="http://www.legendu.net/misc/category/network.html">Network</a></li>
        <li><a href="http://www.legendu.net/misc/category/os.html">OS</a></li>
        <li><a href="http://www.legendu.net/misc/category/people.html">People</a></li>
        <li><a href="http://www.legendu.net/misc/category/philosophy.html">Philosophy</a></li>
        <li><a href="http://www.legendu.net/misc/category/programming.html">Programming</a></li>
        <li><a href="http://www.legendu.net/misc/category/research.html">Research</a></li>
        <li><a href="http://www.legendu.net/misc/category/sheng-huo.html">生活</a></li>
        <li><a href="http://www.legendu.net/misc/category/si-suo.html">思索</a></li>
        <li><a href="http://www.legendu.net/misc/category/software.html">Software</a></li>
        <li><a href="http://www.legendu.net/misc/category/statistics.html">Statistics</a></li>
        <li><a href="http://www.legendu.net/misc/category/teleconference.html">Teleconference</a></li>
        <li><a href="http://www.legendu.net/misc/category/tools.html">Tools</a></li>
        <li><a href="http://www.legendu.net/misc/category/trading.html">Trading</a></li>
        <li><a href="http://www.legendu.net/misc/category/unix.html">Unix</a></li>
        <li><a href="http://www.legendu.net/misc/category/visualization.html">Visualization</a></li>
        <li><a href="http://www.legendu.net/misc/category/windows.html">Windows</a></li>
        <li><a href="http://www.legendu.net/misc/category/work.html">Work</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
  <p class="tagcloud">
  </p>
  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/dclong">@dclong</a> on GitHub
    <script type="text/javascript">
      $.domReady(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'http://www.legendu.net/misc/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'dclong',
              count: 3,
              skip_forks: true,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="http://www.legendu.net/misc/theme/js/github.js" type="text/javascript"> </script>
  </section>

    <section>
        <h1>Social</h2>
        <ul>
            <li><a href="https://www.linkedin.com/in/ben-chuanlong-du-1239b221/" target="_blank">LinkedIn</a></li>
            <li><a href="https://twitter.com/longendu" target="_blank">Twitter</a></li>
            <li><a href="https://www.facebook.com/chuanlong.du" target="_blank">Facebook</a></li>
        <!--
            <li><a href="http://www.legendu.net/misc/" type="application/rss+xml" rel="alternate">RSS</a></li>
            -->
        </ul>
    </section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Ben Chuanlong Du -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30259661-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
	<script type="text/javascript">
	  var disqus_shortname = 'dclong';
          var disqus_identifier = '/blog/trap-duplicated-columns-sql-procedure-sas/';
          var disqus_url = 'http://www.legendu.net/misc/blog/trap-duplicated-columns-sql-procedure-sas/';
          var disqus_title = 'The Trap of Duplicated Columns in the SQL Procedure of SAS';
	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
</body>
</html>