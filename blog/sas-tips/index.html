<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Tips on SAS</title>
  <meta name="author" content="Ben Chuanlong Du">

  <link href="http://www.legendu.net/misc/atom.xml" type="application/atom+xml" rel="alternate"
        title="Ben Chuanlong Du's Blog Atom Feed" />


  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="http://www.legendu.net/misc/favicon.png" rel="icon">
  <link href="http://www.legendu.net/misc/theme/css/main_2.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="http://www.legendu.net/misc/theme/js/modernizr-2.0.js"></script>
  <script src="http://www.legendu.net/misc/theme/js/ender.js"></script>
  <script src="http://www.legendu.net/misc/theme/js/octopress.js" type="text/javascript"></script>

  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://www.legendu.net/misc/">Ben Chuanlong Du's Blog</a></h1>
    <h2>It is never too late to learn.</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://www.legendu.net/misc/atom.xml" rel="subscribe-rss">RSS</a></li>
</ul>

<form name="search" action="https://www.bing.com/search" method="get" onSubmit="return build_query()">
  <fieldset role="search">
      <!--
    <input type="hidden" name="q" value="site:http://www.legendu.net/misc" />
        -->
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<script type = "text/javascript">
    function build_query() {
        var query = document.forms["search"]["q"].value;
        var prefix = "site:http://www.legendu.net/misc "
        if (!query.startsWith(prefix)) {
            query = prefix + query;
            document.forms["search"]["q"].value = query;
        }
        return true;
    }
</script>

<ul class="main-navigation">
    <li><a href="http://www.legendu.net">Home</a></li>
    <li><a href="http://www.legendu.net/misc">Blog</a></li>
    <li><a href="http://www.legendu.net/misc/archives.html">Archives</a></li>
    <li><a href="http://www.legendu.net/misc/pages/links.html">Links</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Tips on SAS</h1>
      <p class="meta"><time datetime="2019-05-10T19:13:40-07:00" pubdate>May 10, 2019</time></p>
</header>

  <div class="entry-content"><p><strong>
Things on this page are fragmentary and immature notes/thoughts of the author. 
It is not meant to readers but rather for convenient reference of the author and future improvement.
</strong></p>
<ol>
<li>
<p>SAS on Linux recognize <code>~</code> as the home directory of users.</p>
</li>
<li>
<p>good to use a profile (containing database use and password, etc.) and %include it ...
    e.g., .sas_profile</p>
</li>
</ol>
<div class="highlight"><pre><span></span><span class="nf">%include</span> <span class="s">&quot;~/.sas_profile&quot;</span>;
</pre></div>


<h2 id="library">Library</h2>
<ol>
<li>
<p>There are at least two ways to get the path of the temporary <code>work</code> library.
    The first way is to right click on the <code>work</code> library
    and choose <code>Property ...</code>.
    The second way is to run the following code.</p>
<div class="highlight"><pre><span></span><span class="nf">%put</span> <span class="nf">%sysfunc</span><span class="p">(</span><span class="n">getoption</span><span class="p">(</span><span class="n">work</span><span class="p">));</span>
</pre></div>


<p>However, 
the path returned by these 2 ways might not be correct (which is really annoying).
If you want to keep datasets in the "work" library,
you can copy it to another permanent library.
To do this, </p>
<div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">.</span> <span class="k">select</span> <span class="n">datasets</span> <span class="k">in</span> <span class="n">the</span> <span class="ss">&quot;work&quot;</span> <span class="n">library</span><span class="p">,</span>
<span class="mi">2</span><span class="p">.</span> <span class="k">right</span> <span class="n">click</span> <span class="k">and</span> <span class="k">select</span> <span class="k">copy</span>
<span class="mi">3</span><span class="p">.</span> <span class="k">right</span> <span class="n">click</span> <span class="k">on</span> <span class="n">the</span> <span class="n">permanent</span> <span class="n">library</span>
<span class="mi">4</span><span class="p">.</span> <span class="n">choose</span> <span class="n">paste</span><span class="p">.</span>
</pre></div>


<p>Or you can use the <code>datasets</code> procedure directly.</p>
<div class="highlight"><pre><span></span><span class="n">proc</span> <span class="n">datasets</span> <span class="n">library</span><span class="o">=</span><span class="k">source</span><span class="p">;</span>
   <span class="k">copy</span> <span class="k">out</span><span class="o">=</span><span class="n">dest</span><span class="p">;</span>
<span class="n">run</span><span class="p">;</span>
</pre></div>


</li>
<li>
<p>Do not use the "work" library to save important datasets.
    Always use a (permanent) library.</p>
</li>
<li>
<p>SAS is case-insensitive. 
    It does not matter whether you use upper or lower case 
    for keywords, functions, data set names, etc. in SAS.
    However, 
    strings/characters are case-sensitive. 
    For example, 
    <code>"good"</code> and <code>"GOOD"</code> are different as characters. 
    This matters when your SAS code relies on string comparisons.
    A file path is case-insensitive in Windows but case-sensitive in Linux,<br>
    so a file path in SAS running on a Windows server is case-insensitive 
    but case-sensitive in SAS running on a Linux server.
    A tricky situation where case matters is 
    when a macro variable is embedded in double quotes 
    to be used it as a string value.</p>
</li>
</ol>
<h2 id="procedures">procedures</h2>
<ol>
<li>
<p>metalib (for user name, password information and so on)
    LIBNAME CRE_DATA BASE "/var/userdata/CPRA/Users/ub66536”
    you have additional key word base 
    (this fixes a SAS stored process problem, 
    if you cannot run a stored process, maybe permission)</p>
</li>
<li>
<p>lag and dif functions very useful ...
    can we combine lag and diff? yes
    lag does not work on variables that don't exist in the table
    so you cannot use lag on new variables
    instead, you should use retain</p>
</li>
<li>
<p>termstr, according to files created on different operating systems ...
    use different termstr </p>
</li>
</ol>
<h2 id="other-tips">Other tips</h2>
<ol>
<li>
<p>dm statement is the display manager ...</p>
</li>
<li>
<p>It is very slow to display results in HTML format when there are massive results. 
    Instead of using the prin procedure, it might be much faster to just rerun the code. </p>
</li>
<li>
<p>The <code>pwencode</code> procedure encodes password 
    and let you use it in place of plaintext passwords in SAS programs 
    that access relational database management systems (RDBSMs) and various servers.</p>
</li>
</ol>
<h2 id="options">Options</h2>
<ol>
<li>The global key <code>options</code> in SAS has an alias <code>option</code>. 
    However, it is suggested that you always use <code>options</code> instead of <code>option</code> 
    when setting SAS system options.<div class="highlight"><pre><span></span><span class="n">sas</span> <span class="n">proc</span> <span class="k">sql</span> <span class="n">stimer</span> <span class="k">option</span><span class="p">;</span>
<span class="k">options</span> <span class="n">macrogen</span> <span class="n">symbolgen</span><span class="p">;</span>
<span class="k">option</span> <span class="n">mprint</span> <span class="n">symbolgen</span><span class="p">;</span>
</pre></div>


</li>
</ol>
<h2 id="syntax">Syntax</h2>
<ol>
<li>
<p>be careful when you copy sas code from a non-text editor (e.g., MS Word).
    It might screw up special symbols, such as the double quotes,
    which results in syntax error.</p>
</li>
<li>
<p>SAS has many pre-mature syntax sugars. For example, </p>
<div class="highlight"><pre><span></span><span class="k">data</span> <span class="n">_null_</span><span class="p">;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">intnx</span><span class="p">(</span><span class="s1">&#39;week&#39;</span><span class="p">,</span> <span class="s1">&#39;17oct03&#39;</span><span class="n">d</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
    <span class="n">put</span> <span class="n">x</span><span class="o">=</span> <span class="n">date9</span><span class="p">.;</span>
<span class="n">run</span><span class="p">;</span>
</pre></div>


<p>However, 
it is suggested that you use the following way instead 
as it is more consistent with other programming languages.</p>
<div class="highlight"><pre><span></span><span class="k">data</span> <span class="n">_null_</span><span class="p">;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">intnx</span><span class="p">(</span><span class="s1">&#39;week&#39;</span><span class="p">,</span> <span class="s1">&#39;17oct03&#39;</span><span class="n">d</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
    <span class="n">put</span> <span class="s1">&#39;x = &#39;</span> <span class="n">x</span> <span class="n">date9</span><span class="p">.;</span>
<span class="n">run</span><span class="p">;</span>
</pre></div>


</li>
<li>
<p>You can use l &lt;= x &lt;= u conditions in a SAS where statement,
    which is more convenient.
    We can also do this in python.</p>
</li>
<li>
<p>The keyword descending in the sort procedure must be before the variable it describes in proc sort.</p>
</li>
</ol>
<h3 id="naming">Naming</h3>
<ol>
<li>
<p>Names of engines, filerefs, librefs and passwords can be at most 8 characters;
    names of call routines, functions and procedures can be at most 16 characters;
    all other variable names can have at least 28 characters.</p>
</li>
<li>
<p>You can use _SomeVar as macro variable names.
    It seems that some people like to use this naming convention.
    I think this is to avoid name confliction.
    To avoid name confliction, 
    a good way is to use _ followed by a sequence of random digits (e.g., _2893478219903).</p>
</li>
</ol>
<h2 id="random">Random</h2>
<ol>
<li>
<p>ranuni, call ranuni, unifrom, call randgen
    use a negative seed to use time as seed,
    which is recommended</p>
</li>
<li>
<p><code>&amp;&amp;x&amp;i.</code>, <code>&amp;&amp;x.&amp;i.</code> 
    <code>.</code> is not makeing things clear, from this view, you know which is right!</p>
</li>
</ol>
<h2 id="branch">branch</h2>
<ol>
<li>only the first statment following an if ... then ... clause is run.
    If you want to run run multiple statements in a if ... then ... branch,
    you have to include them in a do ... end block.</li>
</ol>
<h2 id="references">References</h2>
<ul>
<li><a href="http://duanzy.blogspot.com/">CFA SAS FRM Statistics Finance</a></li>
</ul>
<p>http://www.jiangtanghu.com/blog/2012/10/16/incorporate-sasiml-to-base-sas/</p>
<p>http://support.sas.com/documentation/cdl/en/imlug/64248/HTML/default/viewer.htm#imlug_procs_sect005.htm</p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Ben Chuanlong Du</span>
  </span>
<time datetime="2019-05-10T19:13:40-07:00" pubdate>May 10, 2019</time>  <span class="categories">
    <a class="category" href="http://www.legendu.net/misc/tag/tips.html">tips</a>
    <a class="category" href="http://www.legendu.net/misc/tag/sas.html">SAS</a>
    <a class="category" href="http://www.legendu.net/misc/tag/programming.html">programming</a>
  </span>
</p>    </footer>
  </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/python-tips/">Tips on Python</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/python-tips-and-traps/">Python Tips and Traps</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/exception-and-error-handling-in-python/">Exception and Error Handling in Python</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/ipython-tips/">Tips on IPython</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/tips-for-git-large-file-storage/">Tips for Git Large File Storage</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="http://www.legendu.net/misc/category/ai.html">AI</a></li>
        <li><a href="http://www.legendu.net/misc/category/career.html">Career</a></li>
        <li><a href="http://www.legendu.net/misc/category/cloud.html">Cloud</a></li>
        <li><a href="http://www.legendu.net/misc/category/database.html">Database</a></li>
        <li><a href="http://www.legendu.net/misc/category/encryption.html">Encryption</a></li>
        <li><a href="http://www.legendu.net/misc/category/english.html">English</a></li>
        <li><a href="http://www.legendu.net/misc/category/finance.html">Finance</a></li>
        <li><a href="http://www.legendu.net/misc/category/fun-problems.html">Fun Problems</a></li>
        <li><a href="http://www.legendu.net/misc/category/hardware.html">Hardware</a></li>
        <li><a href="http://www.legendu.net/misc/category/internet.html">Internet</a></li>
        <li><a href="http://www.legendu.net/misc/category/job.html">Job</a></li>
        <li><a href="http://www.legendu.net/misc/category/jupyterlab.html">JupyterLab</a></li>
        <li><a href="http://www.legendu.net/misc/category/language.html">Language</a></li>
        <li><a href="http://www.legendu.net/misc/category/life.html">Life</a></li>
        <li><a href="http://www.legendu.net/misc/category/links.html">Links</a></li>
        <li><a href="http://www.legendu.net/misc/category/linux.html">Linux</a></li>
        <li><a href="http://www.legendu.net/misc/category/machine-learning.html">Machine Learning</a></li>
        <li><a href="http://www.legendu.net/misc/category/macos.html">macOS</a></li>
        <li><a href="http://www.legendu.net/misc/category/network.html">Network</a></li>
        <li><a href="http://www.legendu.net/misc/category/os.html">OS</a></li>
        <li><a href="http://www.legendu.net/misc/category/people.html">People</a></li>
        <li><a href="http://www.legendu.net/misc/category/philosophy.html">Philosophy</a></li>
        <li><a href="http://www.legendu.net/misc/category/programming.html">Programming</a></li>
        <li><a href="http://www.legendu.net/misc/category/research.html">Research</a></li>
        <li><a href="http://www.legendu.net/misc/category/sheng-huo.html">生活</a></li>
        <li><a href="http://www.legendu.net/misc/category/si-suo.html">思索</a></li>
        <li><a href="http://www.legendu.net/misc/category/software.html">Software</a></li>
        <li><a href="http://www.legendu.net/misc/category/statistics.html">Statistics</a></li>
        <li><a href="http://www.legendu.net/misc/category/teleconference.html">Teleconference</a></li>
        <li><a href="http://www.legendu.net/misc/category/tools.html">Tools</a></li>
        <li><a href="http://www.legendu.net/misc/category/trading.html">Trading</a></li>
        <li><a href="http://www.legendu.net/misc/category/unix.html">Unix</a></li>
        <li><a href="http://www.legendu.net/misc/category/visualization.html">Visualization</a></li>
        <li><a href="http://www.legendu.net/misc/category/windows.html">Windows</a></li>
        <li><a href="http://www.legendu.net/misc/category/work.html">Work</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
  <p class="tagcloud">
  </p>
  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/dclong">@dclong</a> on GitHub
    <script type="text/javascript">
      $.domReady(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'http://www.legendu.net/misc/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'dclong',
              count: 3,
              skip_forks: true,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="http://www.legendu.net/misc/theme/js/github.js" type="text/javascript"> </script>
  </section>

    <section>
        <h1>Social</h2>
        <ul>
            <li><a href="https://www.linkedin.com/in/ben-chuanlong-du-1239b221/" target="_blank">LinkedIn</a></li>
            <li><a href="https://twitter.com/longendu" target="_blank">Twitter</a></li>
            <li><a href="https://www.facebook.com/chuanlong.du" target="_blank">Facebook</a></li>
        <!--
            <li><a href="http://www.legendu.net/misc/" type="application/rss+xml" rel="alternate">RSS</a></li>
            -->
        </ul>
    </section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Ben Chuanlong Du -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30259661-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
	<script type="text/javascript">
	  var disqus_shortname = 'dclong';
          var disqus_identifier = '/blog/sas-tips/';
          var disqus_url = 'http://www.legendu.net/misc/blog/sas-tips/';
          var disqus_title = 'Tips on SAS';
	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
</body>
</html>