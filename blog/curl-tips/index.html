<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Tips on cURL and Wget</title>
  <meta name="author" content="Ben Chuanlong Du">

  <link href="http://www.legendu.net/misc/atom.xml" type="application/atom+xml" rel="alternate"
        title="Ben Chuanlong Du's Blog Atom Feed" />


  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="http://www.legendu.net/misc/favicon.png" rel="icon">
  <link href="http://www.legendu.net/misc/theme/css/main_2.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="http://www.legendu.net/misc/theme/js/modernizr-2.0.js"></script>
  <script src="http://www.legendu.net/misc/theme/js/ender.js"></script>
  <script src="http://www.legendu.net/misc/theme/js/octopress.js" type="text/javascript"></script>

  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://www.legendu.net/misc/">Ben Chuanlong Du's Blog</a></h1>
    <h2>It is never too late to learn.</h2>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://www.legendu.net/misc/atom.xml" rel="subscribe-rss">RSS</a></li>
</ul>

<form name="search" action="https://www.bing.com/search" method="get" onSubmit="return build_query()">
  <fieldset role="search">
      <!--
    <input type="hidden" name="q" value="site:http://www.legendu.net/misc" />
        -->
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>

<script type = "text/javascript">
    function build_query() {
        var query = document.forms["search"]["q"].value;
        var prefix = "site:http://www.legendu.net/misc "
        if (!query.startsWith(prefix)) {
            query = prefix + query;
            document.forms["search"]["q"].value = query;
        }
        return true;
    }
</script>

<ul class="main-navigation">
    <li><a href="http://www.legendu.net">Home</a></li>
    <li><a href="http://www.legendu.net/misc">Blog</a></li>
    <li><a href="http://www.legendu.net/misc/archives.html">Archives</a></li>
    <li><a href="http://www.legendu.net/misc/pages/links.html">Links</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Tips on cURL and Wget</h1>
      <p class="meta"><time datetime="2019-09-27T00:13:13-07:00" pubdate>Sep 27, 2019</time></p>
</header>

  <div class="entry-content"><p><strong>
Things on this page are fragmentary and immature notes/thoughts of the author.
It is not meant to readers but rather for convenient reference of the author and future improvement.
</strong></p>
<h2 id="curl-vs-wget">cURL vs Wget</h2>
<p><a href="https://daniel.haxx.se/docs/curl-vs-wget.html">curl vs wget</a>
has a detailed comparison between curl and wget.
In short, 
curl is more powerful and flexible and thus is preferred to wget
unless you want to download content recursively from a site 
(which curl does not support currently).</p>
<h2 id="alternatives-to-curl">Alternatives to <code>curl</code></h2>
<p><a href="https://curl.trillworks.com/">Convert curl syntax to Python, Node.js, R, PHP, Strest, Go, JSON, Rust</a></p>
<p>The postman plugin for Google Chrome can also convert curl command to other programming languages.</p>
<h2 id="proxy">Proxy</h2>
<p>A general way (works for most other command-line tools too) is set the environment variables <code>http_proxy</code> and <code>https_proxy</code>
(and <code>ftp_proxy</code>, etc. if need them).
This way is preferred if your command/script to run has dependencies which also requires proxy to work.</p>
<div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">http_proxy</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">your</span><span class="p">.</span><span class="n">proxy</span><span class="p">.</span><span class="n">server</span><span class="p">:</span><span class="n">port</span>
<span class="n">export</span> <span class="n">https_proxy</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">your</span><span class="p">.</span><span class="n">proxy</span><span class="p">.</span><span class="n">server</span><span class="p">:</span><span class="n">port</span>
</pre></div>


<p>Another simple way is to use the option <code>--proxy</code> directly.
This way is preferred if your command/script does not have other dependencies which also requires proxy to work.</p>
<div class="highlight"><pre><span></span><span class="n">curl</span> <span class="c1">--proxy http://your.proxy.server:port ...</span>
</pre></div>


<h2 id="tricks-and-traps">Tricks and Traps</h2>
<ol>
<li>Use the <code>-L</code> option to follow redirect URLs. 
    This is a really useful trick to use curl to download things from GitHub.</li>
</ol>
<h2 id="curl-examples">cURL Examples</h2>
<div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="c1">--cookie-jar cjar \</span>
    <span class="c1">--output /dev/null \</span>
    <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cos</span><span class="p">.</span><span class="n">name</span><span class="o">/</span><span class="n">cn</span><span class="o">/</span>

<span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="c1">--cookie cjar --cookie-jar cjar \</span>
    <span class="c1">--data &#39;user_login={username}&#39; \</span>
    <span class="c1">--data &#39;password={password}&#39; \</span>
    <span class="c1">--data &#39;form_id=login&#39; \</span>
    <span class="c1">--output cos.html \</span>
    <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cos</span><span class="p">.</span><span class="n">name</span><span class="o">/</span><span class="n">cn</span><span class="o">/</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">curl</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="c1">--cookie-jar cjar \</span>
<span class="w">    </span><span class="c1">--output /dev/null \</span>
<span class="w">    </span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="p">.</span><span class="n">economy</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">login</span><span class="o">/</span><span class="n">a_login</span><span class="p">.</span><span class="n">asp</span><span class="w"></span>

<span class="n">curl</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="c1">--cookie cjar \</span>
<span class="w">    </span><span class="c1">--cookie-jar cjar \</span>
<span class="w">    </span><span class="c1">--data &#39;email={user_email@some.com}&#39; \</span>
<span class="w">    </span><span class="c1">--data &#39;password={password}&#39; \</span>
<span class="w">    </span><span class="c1">--data &#39;form_id=frmMain&#39; \</span>
<span class="w">    </span><span class="c1">--output moody.html \</span>
<span class="w">    </span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="p">.</span><span class="n">economy</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">login</span><span class="o">/</span><span class="n">a_login</span><span class="p">.</span><span class="n">asp</span><span class="w"></span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="c1">--cookie-jar cjar \</span>
    <span class="c1">--output /dev/null \</span>
    <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="p">.</span><span class="n">ncreif</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">login</span><span class="p">.</span><span class="n">aspx</span>

<span class="n">curl</span> <span class="o">-</span><span class="n">v</span> <span class="c1">--cookie cjar \</span>
    <span class="c1">--cookie-jar cjar \</span>
    <span class="c1">--data &#39;username={user_name}&#39; \</span>
    <span class="c1">--data &#39;password={password}&#39; \</span>
    <span class="c1">--data &#39;form_id=form1&#39; \</span>
    <span class="c1">--output ncreif.html \</span>
    <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="p">.</span><span class="n">ncreif</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">login</span><span class="p">.</span><span class="n">aspx</span>
</pre></div>


<div class="highlight"><pre><span></span><span class="n">wget</span> <span class="c1">--no-check-certificate \</span>
    <span class="c1">--load-cookies=ff_cookies.txt \</span>
    <span class="o">-</span><span class="n">p</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">bitbucket</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">dclong</span><span class="o">/</span><span class="n">config</span><span class="o">/</span><span class="k">get</span><span class="o">/</span>
</pre></div>


<p>The easy way: login with your browser,
and give the cookies to wget</p>
<p>Easiest method: in general,
you need to provide wget or <code>cURL</code> with the (logged-in) cookies
from a particular website for them to fetch pages as if you were logged in.</p>
<p>If you are using Firefox,
it's easy to do via the Export Cookies add-on.
Install the add-on, and:</p>
<p>Go to Tools...Export Cookies,
and save the cookies.txt file (you can change the filename/destination).</p>
<p>Open up a terminal,
and use wget with the --load-cookies=FILENAME option, e.g.</p>
<p>wget --load-cookies=cookies.txt http://en.wikipedia.org/wiki/User:A</p>
<p>For <code>cURL</code>, it's</p>
<div class="highlight"><pre><span></span>curl --cookie cookies.txt ...
</pre></div>


<p>The hard way: use <code>cURL</code> (preferably) or <code>wget</code> to manage the entire session</p>
<p>A detailed how-to is beyond the scope of this answer,
but you use <code>cURL</code> with the --cookie-jar or <code>wget</code>
with the --save-cookies --keep-session-cookiesoptions,
along with the HTTP/S PUT method to log in to a site,
save the login cookies, and then use them to simulate a browser.
Needless to say,
this requires going through the HTML source for the login page (get input field names, etc.),
and is often difficult to get to work for sites
using anything beyond simple login/password authentication.</p>
<p>Tip: if you go this route,
it is often much simpler to deal with the mobile version of a website (if available),
at least for the authentication step.</p>
<h2 id="tricks-and-traps_1">Tricks and Traps</h2>
<p><code>-q</code>/<code>--quiet</code>: quiet mode which turns off wget's output.
This option is helpful if you want to have the downloaded content as output only.
<code>curl</code> by default is in quiet mode.
You can force it (or overwrite other non-quiet options) using <code>-s</code>/<code>--silent</code>.</p>
<h2 id="wget-examples">Wget Examples</h2>
<p>To filter for specific file extensions:</p>
<div class="highlight"><pre><span></span>wget -A pdf,jpg -m -p -E -k -K -np http://site/PATH/
</pre></div>


<p>This will mirror the site, but the files without jpg or pdf extension will be automatically removed.</p>
<p>Download all contents under the link.</p>
<div class="highlight"><pre><span></span><span class="n">wget</span> <span class="o">-</span><span class="n">r</span> <span class="c1">--no-parent -e robots=off http://site/PATH/</span>
</pre></div>


<p>Download all contents except HTML files under the link.</p>
<div class="highlight"><pre><span></span><span class="n">wget</span> <span class="o">-</span><span class="n">r</span> <span class="c1">--no-parent -e robots=off -R &quot;*.html&quot;</span>
</pre></div>


<p>wget --no-check-certificate</p>
<p>wget --random-wait -r -p -e robots=off -U mozilla</p>
<h2 id="references">References</h2>
<p>https://stackoverflow.com/questions/9445489/performing-http-requests-with-curl-using-proxy</p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Ben Chuanlong Du</span>
  </span>
<time datetime="2019-09-27T00:13:13-07:00" pubdate>Sep 27, 2019</time>  <span class="categories">
    <a class="category" href="http://www.legendu.net/misc/tag/tips.html">tips</a>
    <a class="category" href="http://www.legendu.net/misc/tag/curl.html">cURL</a>
    <a class="category" href="http://www.legendu.net/misc/tag/downloading.html">downloading</a>
    <a class="category" href="http://www.legendu.net/misc/tag/web.html">web</a>
    <a class="category" href="http://www.legendu.net/misc/tag/wget.html">wget</a>
  </span>
</p>    </footer>
  </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/python-tips/">Tips on Python</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/python-tips-and-traps/">Python Tips and Traps</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/exception-and-error-handling-in-python/">Exception and Error Handling in Python</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/ipython-tips/">Tips on IPython</a>
      </li>
      <li class="post">
          <a href="http://www.legendu.net/misc/blog/tips-for-git-large-file-storage/">Tips for Git Large File Storage</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="http://www.legendu.net/misc/category/ai.html">AI</a></li>
        <li><a href="http://www.legendu.net/misc/category/career.html">Career</a></li>
        <li><a href="http://www.legendu.net/misc/category/cloud.html">Cloud</a></li>
        <li><a href="http://www.legendu.net/misc/category/database.html">Database</a></li>
        <li><a href="http://www.legendu.net/misc/category/encryption.html">Encryption</a></li>
        <li><a href="http://www.legendu.net/misc/category/english.html">English</a></li>
        <li><a href="http://www.legendu.net/misc/category/finance.html">Finance</a></li>
        <li><a href="http://www.legendu.net/misc/category/fun-problems.html">Fun Problems</a></li>
        <li><a href="http://www.legendu.net/misc/category/hardware.html">Hardware</a></li>
        <li><a href="http://www.legendu.net/misc/category/internet.html">Internet</a></li>
        <li><a href="http://www.legendu.net/misc/category/job.html">Job</a></li>
        <li><a href="http://www.legendu.net/misc/category/jupyterlab.html">JupyterLab</a></li>
        <li><a href="http://www.legendu.net/misc/category/language.html">Language</a></li>
        <li><a href="http://www.legendu.net/misc/category/life.html">Life</a></li>
        <li><a href="http://www.legendu.net/misc/category/links.html">Links</a></li>
        <li><a href="http://www.legendu.net/misc/category/linux.html">Linux</a></li>
        <li><a href="http://www.legendu.net/misc/category/machine-learning.html">Machine Learning</a></li>
        <li><a href="http://www.legendu.net/misc/category/macos.html">macOS</a></li>
        <li><a href="http://www.legendu.net/misc/category/network.html">Network</a></li>
        <li><a href="http://www.legendu.net/misc/category/os.html">OS</a></li>
        <li><a href="http://www.legendu.net/misc/category/people.html">People</a></li>
        <li><a href="http://www.legendu.net/misc/category/philosophy.html">Philosophy</a></li>
        <li><a href="http://www.legendu.net/misc/category/programming.html">Programming</a></li>
        <li><a href="http://www.legendu.net/misc/category/research.html">Research</a></li>
        <li><a href="http://www.legendu.net/misc/category/sheng-huo.html">生活</a></li>
        <li><a href="http://www.legendu.net/misc/category/si-suo.html">思索</a></li>
        <li><a href="http://www.legendu.net/misc/category/software.html">Software</a></li>
        <li><a href="http://www.legendu.net/misc/category/statistics.html">Statistics</a></li>
        <li><a href="http://www.legendu.net/misc/category/teleconference.html">Teleconference</a></li>
        <li><a href="http://www.legendu.net/misc/category/tools.html">Tools</a></li>
        <li><a href="http://www.legendu.net/misc/category/trading.html">Trading</a></li>
        <li><a href="http://www.legendu.net/misc/category/unix.html">Unix</a></li>
        <li><a href="http://www.legendu.net/misc/category/visualization.html">Visualization</a></li>
        <li><a href="http://www.legendu.net/misc/category/windows.html">Windows</a></li>
        <li><a href="http://www.legendu.net/misc/category/work.html">Work</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
  <p class="tagcloud">
  </p>
  </section>



  <section>
    <h1>GitHub Repos</h1>
    <ul id="gh_repos">
      <li class="loading">Status updating...</li>
    </ul>
      <a href="https://github.com/dclong">@dclong</a> on GitHub
    <script type="text/javascript">
      $.domReady(function(){
          if (!window.jXHR){
              var jxhr = document.createElement('script');
              jxhr.type = 'text/javascript';
              jxhr.src = 'http://www.legendu.net/misc/theme/js/jXHR.js';
              var s = document.getElementsByTagName('script')[0];
              s.parentNode.insertBefore(jxhr, s);
          }

          github.showRepos({
              user: 'dclong',
              count: 3,
              skip_forks: true,
              target: '#gh_repos'
          });
      });
    </script>
    <script src="http://www.legendu.net/misc/theme/js/github.js" type="text/javascript"> </script>
  </section>

    <section>
        <h1>Social</h2>
        <ul>
            <li><a href="https://www.linkedin.com/in/ben-chuanlong-du-1239b221/" target="_blank">LinkedIn</a></li>
            <li><a href="https://twitter.com/longendu" target="_blank">Twitter</a></li>
            <li><a href="https://www.facebook.com/chuanlong.du" target="_blank">Facebook</a></li>
        <!--
            <li><a href="http://www.legendu.net/misc/" type="application/rss+xml" rel="alternate">RSS</a></li>
            -->
        </ul>
    </section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Ben Chuanlong Du -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-30259661-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
	<script type="text/javascript">
	  var disqus_shortname = 'dclong';
          var disqus_identifier = '/blog/curl-tips/';
          var disqus_url = 'http://www.legendu.net/misc/blog/curl-tips/';
          var disqus_title = 'Tips on cURL and Wget';
	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
</body>
</html>